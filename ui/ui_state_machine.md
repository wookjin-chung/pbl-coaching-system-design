# UI State Machine  
## PBL 코칭 서비스의 UI 상태 머신 설계

---

## 이 문서의 목적

이 문서는 **PBL 코칭 서비스의 UI가 어떤 상태를 가지며,  
어떤 조건에서 어떤 상태로 전환되는지**를 명확히 정의합니다.

여기서 UI 상태 머신은:
- 화면 전환을 위한 기술 문서가 아니라
- **자기 인식을 촉발하기 위한 설계 규칙**입니다.

UI는 정보를 최대한 보여주는 장치가 아니라,  
**필요한 인식만을 정확한 타이밍에 노출하는 장치**로 설계됩니다.

---

## 기본 전제

### 1️⃣ UI는 판단을 대신하지 않는다

UI는:
- 사용자의 위치를 판정하지 않고
- 성취도를 평가하지 않으며
- 다음 행동을 지시하지 않습니다.

UI는 오직:
- 지금 인식해도 되는 정보만을
- 최소한의 형태로
- 조용히 드러냅니다.

---

### 2️⃣ UI는 항상 “부분 정보”만 노출한다

UI는:
- 전체 경로를 한 번에 보여주지 않으며
- 모든 선택지를 동시에 제시하지 않습니다.

이는 사용자의 판단을 보호하기 위한  
**의도적 불완전성 설계**입니다.

---

## UI 상태 머신의 상위 구조

UI 상태 머신은  
다음 **세 개의 상위 상태 영역**으로 구성됩니다.

1. 입력 상태 (Input States)
2. 반응 상태 (Response States)
3. 회복 상태 (Recovery States)

각 상태는  
PBL 단계나 코칭 모드와 직접 1:1 대응되지 않으며,  
**그 위에서 유연하게 작동**합니다.

---

## 1️⃣ 입력 상태 (Input States)

### `Idle`
- 사용자가 아무 입력도 하지 않는 상태
- 이전 경로 요약 또는 현재 위치만 최소 노출

---

### `Writing`
- 사용자가 기록을 작성 중인 상태
- UI는 외부 정보 제공을 최소화
- 저장/정리 압박을 주지 않음

---

### `Editing`
- 기존 기록을 수정 중인 상태
- 과거 기록과의 비교는 기본적으로 숨김
- 수정 행위 자체를 **자각의 일부**로 취급

---

## 2️⃣ 반응 상태 (Response States)

### `Reflecting`
- 기록 제출 직후
- AI 응답이 생성되기 전의 짧은 상태
- UI는 즉각적인 피드백을 제공하지 않음

이 지연은  
AI가 판단을 대신하지 않는다는  
**신호 역할**을 합니다.

---

### `Guided`
- AI가 질문, 정리, 관점 제안을 제공하는 상태
- 현재 활성화된 시간 축(과거/현재/미래)에 맞춰  
  UI 정보 밀도 조절

---

### `Paused`
- 사용자가 의도적으로 멈춘 상태
- UI는 “중단”을 문제로 표현하지 않음
- 재개 가능성만 암시

---

## 3️⃣ 회복 상태 (Recovery States)

### `Resumable`
- 일정 시간 이상 중단 후 재방문
- UI는:
  - 마지막 기록 지점
  - 마지막 활성 시간 축
  중 **하나만** 조용히 제시

---

### `Reoriented`
- 사용자가 다시 입력을 시작한 상태
- 과거 요약을 접고 현재 입력에 집중

---

## 상태 전이 원칙

UI 상태 전이는  
명시적 이벤트보다  
**사용자 행동의 맥락**을 우선합니다.

---

### 주요 전이 예시

- `Idle` → `Writing`  
  사용자가 입력을 시작함

- `Writing` → `Reflecting`  
  기록을 제출함

- `Reflecting` → `Guided`  
  AI 응답 준비 완료

- `Guided` → `Paused`  
  일정 시간 입력 없음

- `Paused` → `Resumable`  
  장기 중단 후 재방문

- `Resumable` → `Reoriented`  
  사용자가 다시 기록 시작

---

## Path Awareness Layer와의 결합

UI 상태 머신은  
항상 Path Awareness Layer의 제약을 따릅니다.

- 하나의 시간 축만 노출
- 단계 이동 선언 금지
- 결론형 메시지 금지

UI는  
경로 인식을 **보여주지 않고 느끼게** 합니다.

---

## 코칭 모드와의 관계

코칭 모드는:
- UI 상태를 직접 변경하지 않습니다.
- 다만:
  - 질문의 형태
  - 정보 밀도
  - 표현 어조

에만 영향을 미칩니다.

즉,  
**UI 상태 = 사용자의 행동 맥락**  
**코칭 모드 = 응답의 관점**

으로 분리됩니다.

---

## 실패와 복구에 대한 UI 태도

UI는 실패를 다음처럼 다룹니다.

- 중단 → 정상 상태
- 반복 → 학습의 일부
- 정체 → 관찰 대상

UI는:
- 경고하지 않고
- 비교하지 않으며
- 압박하지 않습니다.

---

## 설계 원칙 요약

- UI는 말수가 적다
- UI는 위치를 판정하지 않는다
- UI는 결론을 닫지 않는다
- UI는 선택지를 줄인다
- UI는 다시 돌아올 자리를 남긴다

---

## 한 문장 요약

> **이 UI 상태 머신은  
> 사용자를 움직이기 위한 장치가 아니라,  
> 사용자가 멈췄다가 다시 시작할 수 있도록 설계된 구조다.**
